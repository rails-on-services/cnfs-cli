---
apiVersion: <%= skaffold_version %>
kind: Config
deploy:
  helm:
    releases:
      - name: sftp
        chartPath: ros/sftp
        remote: true
        overrides:
          labels:
            <%= skaffold_labels %>
          envFromSecrets:<% env_files.each do |file| %>
            - <%= file %><% end %>
          image:
            pullPolicy: <%= pull_policy %>
          service:
            type: LoadBalancer
            annotations:
              service.beta.kubernetes.io/aws-load-balancer-type: nlb
              external-dns.alpha.kubernetes.io/hostname: <%= hostname %>
          resources: 
            limits:
              cpu: 100m
              memory: 128Mi
            requests:
              cpu: 100m
              memory: 128Mi
