# applications.yml
---
DEFAULTS: &DEFAULTS
  name: $LABEL

frontend: &frontend
  <<: *DEFAULTS

pipeline: &pipeline
  <<: *DEFAULTS
  services: kafka

backend: &backend
  <<: *DEFAULTS
<% if options.cnfs %>
  type: Application::CnfsBackend
  services: cognito, comm, iam, organization, storage, sftp
  resources: app_bucket, image_bucket, dns, image_cdn
  config: &default_config
    endpoints:
      api: 'api.{domain}'
      sftp: 'sftp.{domain}'
  environment:
    platform:
      api_docs:
        server:
          host: 'https://api.{domain}'
      connection:
        type: host
        external_connection_type: path
        # feature_set: mounted
        hosts: 'api.{domain}'
      jwt:
        aud: 'https://api.{domain}'
        iss: 'https://iam.api.{domain}'
      partition_name: ros
      postman:
        workspace: 'api.{domain}'
<% end %>
